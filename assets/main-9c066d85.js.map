{"version":3,"file":"main-9c066d85.js","sources":["../../src/js/scroll/scroll.js","../../src/main.js"],"sourcesContent":["// Підключення функціоналу \"Чертоги Фрілансера\"\nimport { isMobile, getHash, menuClose, getDigFormat } from '../functions.js';\nimport { myModules } from '../modules.js';\n// Модуль прокручування до блоку\nimport { gotoBlock } from './gotoblock.js';\n// Змінна контролю додавання події window scroll.\nlet addWindowScrollEvent = false;\n\n//====================================================================================================================================================================================================================================================================================================\n// Плавна навігація по сторінці\nexport function pageNavigation() {\n  // data-goto - вказати ID блоку\n  // data-goto-header - враховувати header\n  // data-goto-top - недокрутити на вказаний розмір\n  // data-goto-speed - швидкість (тільки якщо використовується додатковий плагін)\n  // Працюємо при натисканні на пункт\n  document.addEventListener('click', pageNavigationAction);\n  // Якщо підключено scrollWatcher, підсвічуємо поточний пункт меню\n  document.addEventListener('watcherCallback', pageNavigationAction);\n  // Основна функція\n  function pageNavigationAction(e) {\n    if (e.type === 'click') {\n      const targetElement = e.target;\n      if (targetElement.closest('[data-goto]')) {\n        const gotoLink = targetElement.closest('[data-goto]');\n        const gotoLinkSelector = gotoLink.dataset.goto\n          ? gotoLink.dataset.goto\n          : '';\n        const noHeader = gotoLink.hasAttribute('data-goto-header')\n          ? true\n          : false;\n        const gotoSpeed = gotoLink.dataset.gotoSpeed\n          ? gotoLink.dataset.gotoSpeed\n          : 500;\n        const offsetTop = gotoLink.dataset.gotoTop\n          ? parseInt(gotoLink.dataset.gotoTop)\n          : 0;\n        if (myModules.fullpage) {\n          const fullpageSection = document\n            .querySelector(`${gotoLinkSelector}`)\n            .closest('[data-fp-section]');\n          const fullpageSectionId = fullpageSection\n            ? +fullpageSection.dataset.fpId\n            : null;\n          if (fullpageSectionId !== null) {\n            myModules.fullpage.switchingSection(fullpageSectionId);\n            document.documentElement.classList.contains('menu-open')\n              ? menuClose()\n              : null;\n          }\n        } else {\n          gotoBlock(gotoLinkSelector, noHeader, gotoSpeed, offsetTop);\n        }\n        e.preventDefault();\n      }\n    } else if (e.type === 'watcherCallback' && e.detail) {\n      const entry = e.detail.entry;\n      const targetElement = entry.target;\n      // Обробка пунктів навігації, якщо вказано значення navigator, підсвічуємо поточний пункт меню\n      if (targetElement.dataset.watch === 'navigator') {\n        const navigatorActiveItem = document.querySelector(\n          `[data-goto]._navigator-active`\n        );\n        let navigatorCurrentItem;\n        if (\n          targetElement.id &&\n          document.querySelector(`[data-goto=\"#${targetElement.id}\"]`)\n        ) {\n          navigatorCurrentItem = document.querySelector(\n            `[data-goto=\"#${targetElement.id}\"]`\n          );\n        } else if (targetElement.classList.length) {\n          for (let index = 0; index < targetElement.classList.length; index++) {\n            const element = targetElement.classList[index];\n            if (document.querySelector(`[data-goto=\".${element}\"]`)) {\n              navigatorCurrentItem = document.querySelector(\n                `[data-goto=\".${element}\"]`\n              );\n              break;\n            }\n          }\n        }\n        if (entry.isIntersecting) {\n          // Бачимо об'єкт\n          // navigatorActiveItem ? navigatorActiveItem.classList.remove('_navigator-active') : null;\n          navigatorCurrentItem\n            ? navigatorCurrentItem.classList.add('_navigator-active')\n            : null;\n          //const activeItems = document.querySelectorAll('._navigator-active');\n          //activeItems.length > 1 ? chooseOne(activeItems) : null\n        } else {\n          // Не бачимо об'єкт\n          navigatorCurrentItem\n            ? navigatorCurrentItem.classList.remove('_navigator-active')\n            : null;\n        }\n      }\n    }\n  }\n  function chooseOne(activeItems) {}\n  // Прокручування по хешу\n  if (getHash()) {\n    let goToHash;\n    if (document.querySelector(`#${getHash()}`)) {\n      goToHash = `#${getHash()}`;\n    } else if (document.querySelector(`.${getHash()}`)) {\n      goToHash = `.${getHash()}`;\n    }\n    goToHash ? gotoBlock(goToHash, true, 500, 20) : null;\n  }\n}\n// Робота з шапкою при скролі\nexport function headerScroll() {\n  addWindowScrollEvent = true;\n  const header = document.querySelector('header.header');\n  const headerShow = header.hasAttribute('data-scroll-show');\n  const headerShowTimer = header.dataset.scrollShow\n    ? header.dataset.scrollShow\n    : 500;\n  const startPoint = header.dataset.scroll ? header.dataset.scroll : 1;\n  let scrollDirection = 0;\n  let timer;\n  document.addEventListener('windowScroll', function (e) {\n    const scrollTop = window.scrollY;\n    clearTimeout(timer);\n    if (scrollTop >= startPoint) {\n      !header.classList.contains('_header-scroll')\n        ? header.classList.add('_header-scroll')\n        : null;\n      if (headerShow) {\n        if (scrollTop > scrollDirection) {\n          // downscroll code\n          header.classList.contains('_header-show')\n            ? header.classList.remove('_header-show')\n            : null;\n        } else {\n          // upscroll code\n          !header.classList.contains('_header-show')\n            ? header.classList.add('_header-show')\n            : null;\n        }\n        timer = setTimeout(() => {\n          !header.classList.contains('_header-show')\n            ? header.classList.add('_header-show')\n            : null;\n        }, headerShowTimer);\n      }\n    } else {\n      header.classList.contains('_header-scroll')\n        ? header.classList.remove('_header-scroll')\n        : null;\n      if (headerShow) {\n        header.classList.contains('_header-show')\n          ? header.classList.remove('_header-show')\n          : null;\n      }\n    }\n    scrollDirection = scrollTop <= 0 ? 0 : scrollTop;\n  });\n}\n// Модуль анімація цифрового лічильника\nexport function digitsCounter() {\n  // Функція ініціалізації\n  function digitsCountersInit(digitsCountersItems) {\n    let digitsCounters = digitsCountersItems\n      ? digitsCountersItems\n      : document.querySelectorAll('[data-digits-counter]');\n    if (digitsCounters.length) {\n      digitsCounters.forEach(digitsCounter => {\n        // Обнулення\n        if (digitsCounter.hasAttribute('data-go')) return;\n        digitsCounter.setAttribute('data-go', '');\n        digitsCounter.dataset.digitsCounter = digitsCounter.innerHTML;\n        digitsCounter.innerHTML = `0`;\n        // Анімація\n        digitsCountersAnimate(digitsCounter);\n      });\n    }\n  }\n  // Функція анімації\n  function digitsCountersAnimate(digitsCounter) {\n    let startTimestamp = null;\n    const duration = parseFloat(digitsCounter.dataset.digitsCounterSpeed)\n      ? parseFloat(digitsCounter.dataset.digitsCounterSpeed)\n      : 1000;\n    const startValue = parseFloat(digitsCounter.dataset.digitsCounter);\n    const format = digitsCounter.dataset.digitsCounterFormat\n      ? digitsCounter.dataset.digitsCounterFormat\n      : ' ';\n    const startPosition = 0;\n    const step = timestamp => {\n      if (!startTimestamp) startTimestamp = timestamp;\n      const progress = Math.min((timestamp - startTimestamp) / duration, 1);\n      const value = Math.floor(progress * (startPosition + startValue));\n      digitsCounter.innerHTML =\n        typeof digitsCounter.dataset.digitsCounterFormat !== 'undefined'\n          ? getDigFormat(value, format)\n          : value;\n      if (progress < 1) {\n        window.requestAnimationFrame(step);\n      } else {\n        digitsCounter.removeAttribute('data-go');\n      }\n    };\n    window.requestAnimationFrame(step);\n  }\n  function digitsCounterAction(e) {\n    const entry = e.detail.entry;\n    const targetElement = entry.target;\n    if (targetElement.querySelectorAll('[data-digits-counter]').length) {\n      digitsCountersInit(\n        targetElement.querySelectorAll('[data-digits-counter]')\n      );\n    }\n  }\n\n  document.addEventListener('watcherCallback', digitsCounterAction);\n}\n// При підключенні модуля обробник події запуститься автоматично\nsetTimeout(() => {\n  if (addWindowScrollEvent) {\n    let windowScroll = new Event('windowScroll');\n    window.addEventListener('scroll', function (e) {\n      document.dispatchEvent(windowScroll);\n    });\n  }\n}, 0);\n","// Увімкнути/вимкнути FLS (Full Logging System) (в роботі)\n\nwindow['FLS'] = true;\nimport './scss/main.scss';\n\nimport * as mainFunctions from './js/functions.js';\n\n/* Перевірка підтримки webp, додавання класу webp або no-webp для HTML */\n/* (i) необхідно для коректного відображення webp із css */\n// mainFunctions.isWebp();\n\n/* Додавання класу touch для HTML якщо браузер мобільний */\n// mainFunctions.addTouchClass();\n\n/* Додавання loaded для HTML після повного завантаження сторінки */\n// mainFunctions.addLoadedClass();\n\n/* Модуль для роботи з меню (Бургер) */\n// mainFunctions.menuInit();\n\n/* Форматування чисел */\n// import './libs/wNumb.min.js';\n\n/*\nМодуль \"Спойлери\"\nДокументація: https://template.fls.guru/template-docs/modul-spojlery.html\nСніппет (HTML): spollers\n*/\n// mainFunctions.spollers();\n\n/*\nМодуль \"Таби\"\nСніппет (HTML): tabs\n*/\n// mainFunctions.tabs();\n\n/*\nМодуль \"Таби\"\nСніппет (HTML): hzt\n*/\n// mainFunctions.horizontTabs();\n\n/*\nМодуль \"Показати ще\"\nДокументація: https://template.fls.guru/template-docs/modul-pokazat-eshhjo.html\nСніппет (HTML): showmore\n*/\n// mainFunctions.showMore();\n\n/*\nМодуль \"До/Після\"\nСніппет (HTML): ba\n*/\n// import './js/libs/beforeafter.js';\n\n/*\nМодуль \"Ефект хвиль\"\n*/\n// mainFunctions.rippleEffect();\n\n/*\nМодуль \"Кастомний курсор\"\nДокументация:\nСниппет (HTML):\n*/\n// mainFunctions.customCursor(true);\n\n// ================================================================\n\n/* Динамічний адаптив */\n// import './js/dynamic_adapt.js';\n\n/* \nМодуль \"Попапи\"\nСніппет (HTML): pl, pop\n*/\n// import './js/popup.js';\n\n/* Модуль паралаксу мишею */\n// import './js/libs/parallax-mouse.js';\n\n// =================================\n// ФОРМИ\n// =================================\n\nimport * as myForms from './js/forms/forms.js';\n\n/* Робота з полями форми */\n/*\nmyForms.formFieldsInit({\n\tviewPass: false,\n\tautoHeight: false\n});\n*/\n\n/* Надсилання форми */\n// myForms.formSubmit();\n\n/* Модуль форми \"кількість\" */\n// myForms.formQuantity();\n\n/* Модуль зіркового рейтингу */\n// myForms.formRating();\n\n/* Модуль роботи з select. */\n// import './js/libs/select.js';\n\n/* Модуль роботи з календарем */\n// потрібно встановити залежність npm i js-datepicker\n// import './js/forms/datepicker.js';\n\n// Робота зі слайдером (Swiper) =======================================================================\n/*\nНалаштування підключення плагіна слайдера Swiper та нових слайдерів виконується у файлі js/files/sliders.js\nДокументація плагіна: https://swiperjs.com/\nСніппет(HTML): swiper\n*/\n// import './js/sliders.js';\n\n// Модулі роботи з прокручуванням сторінки ==============================================================\n/*\nЗміна дизайну скроллбару\nпотрібно встановити залежність npm i simplebar\nДокументація по роботі у шаблоні: У HTML додаємо до блоку атрибут data-simplebar\nСніппет(HTML): \n*/\n// import './js/scroll/simplebar.js';\n\n// Ліниве (відкладене) завантаження картинок\n// Документація плагіна: https://github.com/verlok/vanilla-lazyload\n// npm i vanilla-lazyload\n// import './js/scroll/lazyload.js';\n\n// Спостерігач за об'єктами з атрибутом data-watch\n// import './js/libs/watcher.js';\n\n// Модуль поекранної прокрутки\n// import './js/libs/fullpage.js';\n\n// Модуль паралаксу\n// import './js/libs/parallax.js';\n\n// Функції роботи скролом =============================================================================\nimport * as myScroll from './js/scroll/scroll.js';\n\n// Плавна навігація по сторінці\n// myScroll.pageNavigation();\n\n// Функціонал додавання класів до хедеру під час прокручування\n// myScroll.headerScroll();\n\n// Модуль анімація цифрового лічильника\n// myScroll.digitsCounter();\n"],"names":[],"mappings":"ssBA2NA,WAAW,IAAM,CAOjB,EAAG,CAAC,EChOJ,OAAO,IAAS"}